<!DOCTYPE html>
<html>
<head>
    <title>Mappa Treni Italia</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        #map { height: 100vh; width: 100%; }
        body { margin: 0; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Inizializza la mappa sull'Italia
        var map = L.map('map').setView([41.9028, 12.4964], 6);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Esempio: Un "treno" fermo a Roma Termini
        L.marker([41.9009, 12.5020]).addTo(map)
            .bindPopup('Treno 9604 - Roma Termini')
            .openPopup();
    </script>
</body>
</html>
    <script>
    // 1. Setup Mappa
    var map = L.map('map').setView([43.7695, 11.2558], 7); // Centrata sulla Toscana
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

    // 2. Dati del viaggio (Esempio: Roma -> Milano)
    const viaggio = {
        numero: "Frecciarossa 9604",
        partenza: { lat: 41.9009, lon: 12.5020, orario: "14:00" }, // Roma Termini
        arrivo: { lat: 45.4847, lon: 9.2048, orario: "17:00" }     // Milano Centrale
    };

    // Creiamo il marker del treno
    var trenoMarker = L.marker([viaggio.partenza.lat, viaggio.partenza.lon]).addTo(map);

    // 3. Funzione di calcolo posizione
    function aggiornaPosizione() {
        const ora = new Date();
        const adesso = ora.getHours() * 3600 + ora.getMinutes() * 60 + ora.getSeconds();

        // Convertiamo gli orari del treno in secondi dall'inizio della giornata
        const convertiInSecondi = (hms) => {
            const [h, m] = hms.split(':').map(Number);
            return h * 3600 + m * 60;
        };

        const inizioInSecondi = convertiInSecondi(viaggio.partenza.orario);
        const fineInSecondi = convertiInSecondi(viaggio.arrivo.orario);

        if (adesso >= inizioInSecondi && adesso <= fineInSecondi) {
            // Calcoliamo la percentuale del viaggio (da 0 a 1)
            const progresso = (adesso - inizioInSecondi) / (fineInSecondi - inizioInSecondi);

            // Interpolazione lineare (Latitudine e Longitudine)
            const latAttuale = viaggio.partenza.lat + (viaggio.arrivo.lat - viaggio.partenza.lat) * progresso;
            const lonAttuale = viaggio.partenza.lon + (viaggio.arrivo.lon - viaggio.partenza.lon) * progresso;

            trenoMarker.setLatLng([latAttuale, lonAttuale]);
            trenoMarker.bindPopup(`<b>${viaggio.numero}</b><br>In viaggio...`).openPopup();
        } else {
            trenoMarker.bindPopup("Treno non in viaggio").openPopup();
        }
    }

    // Aggiorna ogni secondo
    setInterval(aggiornaPosizione, 1000);
    </script>
const stazioniItaliane = [
    { nome: "Roma Termini", lat: 41.9009, lon: 12.5020 },
    { nome: "Milano Centrale", lat: 45.4847, lon: 9.2048 },
    { nome: "Napoli Centrale", lat: 40.8530, lon: 14.2724 },
    { nome: "Torino Porta Nuova", lat: 45.0622, lon: 7.6784 },
    { nome: "Firenze Santa Maria Novella", lat: 43.7765, lon: 11.2478 },
    { nome: "Bologna Centrale", lat: 44.5058, lon: 11.3418 },
    { nome: "Venezia Santa Lucia", lat: 45.4411, lon: 12.3210 },
    { nome: "Bari Centrale", lat: 41.1168, lon: 16.8700 },
    { nome: "Palermo Centrale", lat: 38.1068, lon: 13.3672 },
    { nome: "Genova Piazza Principe", lat: 44.4169, lon: 8.9213 }
];

// Funzione per aggiungerle alla mappa Leaflet
stazioniItaliane.forEach(stazione => {
    L.marker([stazione.lat, stazione.lon])
     .addTo(map)
     .bindPopup(stazione.nome);
});
